<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Tech Shop & Services{% endblock %}</title>
    <meta name="description" content="{% block description %}Modern tech shop with the latest gadgets and professional services{% endblock %}">
    
    <link rel="preload" href="/static/css/styles3.css" as="style">
    <link rel="preload" href="/static/fonts/inter.woff2" as="font" type="font/woff2" crossorigin>
    
    <link rel="stylesheet" href="/static/css/styles3.css">
    
    <link rel="icon" type="image/svg+xml" href="/static/images/favicon.svg">
    <link rel="alternate icon" href="/static/images/favicon.ico">
    
    <style>
        /* General header layout */
        .header-container {
            display: grid;
            grid-template-columns: 1fr auto 1fr; /* Left, Center Logo, Right */
            align-items: center;
            gap: 1rem;
            padding: 1rem 2rem;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        /* Left section (empty in this simplified version, but keeps grid structure) */
        .header-left {
            display: flex;
            align-items: center;
            justify-content: flex-start;
        }

        /* Center section - oval brand logo */
        .center-brand-logo {
            justify-self: center;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        /* Right section - user actions and mobile toggle */
        .user-actions {
            justify-self: end;
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        
        /* Centered oval brand logo styles */
        .brand-oval-container {
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 60px;
            padding: 12px 24px;
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.3);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            min-width: 180px;
            text-decoration: none; /* Remove underline for anchor tag */
        }
        
        .brand-oval-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.6s;
        }
        
        .brand-oval-container:hover::before {
            left: 100%;
        }
        
        .brand-oval-container:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
        }
        
        .brand-logo-image {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            object-fit: cover;
            margin-right: 12px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            transition: transform 0.3s ease;
        }
        
        .brand-oval-container:hover .brand-logo-image {
            transform: rotate(5deg) scale(1.05);
        }
        
        .brand-logo-text {
            color: white;
            font-weight: 700;
            font-size: 1.2rem;
            letter-spacing: 0.8px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.2);
            text-transform: uppercase;
        }
        
        /* Header hide on scroll */
        .site-header {
            transition: transform 0.3s ease-in-out;
            position: sticky; /* Make header sticky */
            top: 0;
            width: 100%;
            z-index: 1000; /* Ensure header is on top */
            background-color: white; /* Add a background color for when it's sticky */
            box-shadow: 0 2px 5px rgba(0,0,0,0.1); /* Optional shadow for sticky header */
        }
        
        .site-header.hidden {
            transform: translateY(-100%);
        }
        
        /* Main Navigation (Desktop Styles) */
        .main-navigation {
            background-color: #f8f8f8; /* A light background for the nav bar */
            padding: 0.75rem 0;
            box-shadow: inset 0 -1px 0 rgba(0,0,0,0.05);
        }

        .main-navigation .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        .main-navigation .nav-links {
            display: flex; /* Make links horizontal */
            justify-content: center;
            list-style: none;
            padding: 0;
            margin: 0;
            flex-wrap: wrap; /* Allow wrapping on smaller screens before mobile breakpoint */
        }

        .main-navigation .nav-links li {
            margin: 0 1.25rem; /* Spacing between links */
        }

        .main-navigation .nav-link {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 0;
            text-decoration: none;
            color: #333;
            font-weight: 600;
            transition: color 0.3s ease, border-bottom 0.3s ease;
            border-bottom: 2px solid transparent;
        }

        .main-navigation .nav-link:hover,
        .main-navigation .nav-link.active {
            color: #764ba2;
            border-bottom-color: #764ba2;
        }

        .main-navigation .nav-link .nav-icon {
            font-size: 1.1rem; /* Adjust emoji size */
        }

        /* Mobile Menu Toggle (hidden on desktop) */
        .mobile-menu-toggle {
            display: none; /* Hide by default on desktop */
            background: none;
            border: none;
            cursor: pointer;
            padding: 0.5rem;
            z-index: 1100; /* Ensure it's above other elements */
        }

        .mobile-menu-toggle .hamburger-line {
            width: 25px;
            height: 3px;
            background-color: #333;
            display: block;
            margin: 5px 0;
            transition: all 0.3s ease;
            border-radius: 2px;
        }

        .mobile-menu-toggle.active .hamburger-line:nth-child(1) {
            transform: translateY(8px) rotate(45deg);
        }

        .mobile-menu-toggle.active .hamburger-line:nth-child(2) {
            opacity: 0;
        }

        .mobile-menu-toggle.active .hamburger-line:nth-child(3) {
            transform: translateY(-8px) rotate(-45deg);
        }
        
        /* Mobile responsive adjustments */
        @media (max-width: 768px) {
            .header-container {
                grid-template-columns: auto 1fr auto; /* Move actions to right, logo center */
                padding: 0.75rem 1rem;
                gap: 0.5rem;
            }

            .header-left {
                display: none; /* Hide empty left section on smaller screens */
            }
            
            .brand-oval-container {
                padding: 8px 16px;
                border-radius: 40px;
                min-width: 120px;
            }
            
            .brand-logo-image {
                width: 30px;
                height: 30px;
                margin-right: 8px;
            }
            
            .brand-logo-text {
                font-size: 0.9rem;
                letter-spacing: 0.4px;
            }

            .user-actions {
                order: 3; /* Ensure actions are on the right */
            }

            .center-brand-logo {
                order: 2; /* Ensure logo is centered */
            }

            /* Show mobile menu toggle */
            .mobile-menu-toggle {
                display: block; 
            }

            /* Main Navigation (Mobile Styles - Vertical) */
            .main-navigation {
                position: fixed; /* Overlay the content */
                top: 0; /* Adjusted to be below the header if it's not hidden */
                left: 0;
                width: 100%;
                height: 100vh; /* Full viewport height */
                background-color: rgba(255, 255, 255, 0.98); /* Semi-transparent white background */
                z-index: 999; /* Below header, above content */
                display: flex;
                flex-direction: column;
                justify-content: center; /* Center links vertically */
                align-items: center;
                transform: translateX(100%); /* Start off-screen */
                transition: transform 0.3s ease-out;
            }

            .main-navigation.active {
                transform: translateX(0); /* Slide in */
            }

            .main-navigation .nav-container {
                padding: 0; /* Remove horizontal padding for mobile nav */
                width: 100%;
            }

            .main-navigation .nav-links {
                flex-direction: column; /* Stack links vertically */
                align-items: center; /* Center horizontally */
                text-align: center;
            }

            .main-navigation .nav-links li {
                margin: 1rem 0; /* More vertical spacing */
                width: 100%; /* Make list items take full width */
            }

            .main-navigation .nav-link {
                padding: 1rem 0; /* Larger touch area */
                font-size: 1.3rem; /* Larger font size */
                justify-content: center; /* Center text and icon */
                border-bottom: none; /* No underline on mobile links */
            }

            .main-navigation .nav-link:hover,
            .main-navigation .nav-link.active {
                border-bottom: none; /* No underline on mobile links */
                color: #667eea; /* A different highlight color */
            }

            /* Hide the main header when mobile menu is active to avoid double headers */
            body.mobile-menu-open .site-header {
                /* This will need adjustment if header is sticky/hides */
                /* For now, just ensure the main nav goes full height */
            }
        }
        
        @media (max-width: 480px) {
            .brand-oval-container {
                padding: 6px 12px;
                min-width: 100px;
            }
            
            .brand-logo-text {
                font-size: 0.8rem;
            }

            .user-actions {
                gap: 0.5rem;
            }
        }
    </style>
    
    {% block extra_head %}{% endblock %}
</head>
<body class="loading">
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-spinner">
            <div class="spinner-ring"></div>
            <span class="loading-text">Loading...</span>
        </div>
    </div>

    <a href="#main-content" class="skip-link">Skip to main content</a>

    <header class="site-header" id="siteHeader">
        <div class="header-container">
            <div class="header-left">
                </div>

            <div class="center-brand-logo">
                <a href="/" class="brand-oval-container" aria-label="Baitech - Home">
                    <img src="/static/images/logo.png" alt="Baitech Logo" class="brand-logo-image">
                    <span class="brand-logo-text">Baitech</span>
                </a>
            </div>

            <div class="user-actions">
                <a href="/checkout" class="action-btn cart-btn" aria-label="Shopping cart">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="9" cy="21" r="1"></circle>
                        <circle cx="20" cy="21" r="1"></circle>
                        <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
                    </svg>
                    <span class="cart-count" id="cartCount">0</span>
                </a>

                <button class="mobile-menu-toggle" aria-label="Toggle navigation menu" id="mobileMenuToggle">
                    <span class="hamburger-line"></span>
                    <span class="hamburger-line"></span>
                    <span class="hamburger-line"></span>
                </button>
            </div>
        </div>

        <nav class="main-navigation" aria-label="Main navigation" id="mainNavigation">
            <div class="nav-container">
                <ul class="nav-links">
                    <li><a href="/" class="nav-link" data-page="home">
                        <span class="nav-icon">üè†</span>
                        <span class="nav-text">Home</span>
                    </a></li>
                    <li><a href="/catalogue" class="nav-link" data-page="products">
                        <span class="nav-icon">üì¶</span>
                        <span class="nav-text">Products</span>
                    </a></li>
                    <li><a href="/services" class="nav-link" data-page="services">
                        <span class="nav-icon">üîß</span>
                        <span class="nav-text">Services</span>
                    </a></li>
                    <li><a href="/about" class="nav-link" data-page="about">
                        <span class="nav-icon">‚ÑπÔ∏è</span>
                        <span class="nav-text">About</span>
                    </a></li>
                    <li><a href="/login" class="nav-link" data-page="login">
                        <span class="nav-icon">üîê</span>
                        <span class="nav-text">Login</span>
                    </a></li>
                    <li><a href="/signup" class="nav-link" data-page="signup">
                        <span class="nav-icon">üìù</span>
                        <span class="nav-text">Signup</span>
                    </a></li>
                </ul>
            </div>
        </nav>
    </header>

    <main id="main-content" class="main-content">
        {% block content %}{% endblock %}
    </main>

    <footer class="site-footer">
        <div class="footer-container">
            <div class="footer-grid">
                <div class="footer-section">
                    <h3 class="footer-title">Baitech</h3>
                    <p class="footer-description">Your trusted partner for cutting-edge technology and professional services. Quality products, expert solutions.</p>
                    <div class="social-links">
                        <a href="#" class="social-link" aria-label="Facebook">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
                            </svg>
                        </a>
                        <a href="#" class="social-link" aria-label="Twitter">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"/>
                            </svg>
                        </a>
                        <a href="#" class="social-link" aria-label="Instagram">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="2" y="2" width="20" height="20" rx="5" ry="5"></rect>
                                <path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path>
                                <line x1="17.5" y1="6.5" x2="17.51" y2="6.5"></line>
                            </svg>
                        </a>
                    </div>
                </div>

                <div class="footer-section">
                    <h3 class="footer-title">Quick Links</h3>
                    <ul class="footer-links">
                        <li><a href="/catalogue">All Products</a></li>
                        <li><a href="/services">Our Services</a></li>
                        <li><a href="/login">Login</a></li>
                        <li><a href="/signup">Signup</a></li>
                    </ul>
                </div>

                <div class="footer-section">
                    <h3 class="footer-title">Customer Care</h3>
                    <ul class="footer-links">
                        <li><a href="/contact">Contact Us</a></li>
                        <li><a href="/shipping">Shipping Info</a></li>
                        <li><a href="/returns">Returns</a></li>
                        <li><a href="/faq">FAQ</a></li>
                    </ul>
                </div>

                <div class="footer-section">
                    <h3 class="footer-title">Get in Touch</h3>
                    <div class="contact-info">
                        <p class="contact-item">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>
                            </svg>
                            +254 799 954 672
                        </p>
                        <p class="contact-item">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
                                <polyline points="22,6 12,13 2,6"></polyline>
                            </svg>
                            mnent2025@gmail.com
                        </p>
                        <p class="contact-item">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
                                <circle cx="12" cy="10" r="3"></circle>
                            </svg>
                            Nairobi, Kenya
                        </p>
                    </div>
                </div>
            </div>

            <div class="footer-bottom">
                <p class="copyright">
                    &copy; {{ now.year if now else "2025" }} Baitech Shop & Services. All rights reserved.
                </p>
                <div class="footer-legal">
                    <a href="/privacy">Privacy Policy</a>
                    <a href="/terms">Terms of Service</a>
                </div>
            </div>
        </div>
    </footer>

    <button class="back-to-top" id="backToTop" aria-label="Back to top">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M18 15l-6-6-6 6"></path>
        </svg>
    </button>

    {% block scripts %}{% endblock %}
    
    <script>
        // Loading animation
        window.addEventListener('load', function() {
            document.body.classList.remove('loading');
            document.getElementById('loadingOverlay').style.opacity = '0';
            setTimeout(() => {
                document.getElementById('loadingOverlay').style.display = 'none';
            }, 500);
        });

        // Mobile menu toggle
        const mobileMenuToggle = document.getElementById('mobileMenuToggle');
        const mainNavigation = document.getElementById('mainNavigation');
        const siteHeader = document.getElementById('siteHeader'); // Get the header itself

        mobileMenuToggle.addEventListener('click', function() {
            mainNavigation.classList.toggle('active');
            mobileMenuToggle.classList.toggle('active');
            document.body.classList.toggle('mobile-menu-open');
            // Prevent body scroll when menu is open
            if (document.body.classList.contains('mobile-menu-open')) {
                document.body.style.overflow = 'hidden';
            } else {
                document.body.style.overflow = '';
            }
        });

        // Close mobile menu when a link is clicked
        const navLinks = document.querySelectorAll('.nav-link');
        navLinks.forEach(link => {
            link.addEventListener('click', () => {
                if (mainNavigation.classList.contains('active')) {
                    mainNavigation.classList.remove('active');
                    mobileMenuToggle.classList.remove('active');
                    document.body.classList.remove('mobile-menu-open');
                    document.body.style.overflow = ''; // Restore scroll
                }
            });
        });

        // Header hide on scroll
        let lastScrollY = window.scrollY;
        
        window.addEventListener('scroll', function() {
            const currentScrollY = window.scrollY;
            
            // Only hide header if mobile menu is not open
            if (!document.body.classList.contains('mobile-menu-open')) {
                if (currentScrollY > lastScrollY && currentScrollY > 100) {
                    siteHeader.classList.add('hidden');
                } else if (currentScrollY < lastScrollY) {
                    siteHeader.classList.remove('hidden');
                }
            } else {
                 // If mobile menu is open, ensure header is visible for consistency
                 siteHeader.classList.remove('hidden');
            }
            lastScrollY = currentScrollY;
        });

        // Back to top button
        const backToTop = document.getElementById('backToTop');
        
        window.addEventListener('scroll', function() {
            if (window.scrollY > 500) {
                backToTop.classList.add('visible');
            } else {
                backToTop.classList.remove('visible');
            }
        });
        
        backToTop.addEventListener('click', function() {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });

        // Active navigation highlighting
        const currentPath = window.location.pathname;
        const allNavLinks = document.querySelectorAll('.nav-link'); // Use allNavLinks to differentiate from the earlier const navLinks
        
        allNavLinks.forEach(link => {
            const href = link.getAttribute('href');
            // Check for exact match or if currentPath is '/' and href is '/'
            if (href === currentPath || (currentPath === '/' && href === '/')) {
                link.classList.add('active');
            }
        });

        // Cart count update (placeholder - integrate with your cart system)
        function updateCartCount(count) {
            const cartCount = document.getElementById('cartCount');
            cartCount.textContent = count;
            cartCount.style.display = count > 0 ? 'flex' : 'none';
        }

        // Initialize cart count
        updateCartCount(0);
    </script>
</body>
</html>